(this["webpackJsonpcurrency-exchange"]=this["webpackJsonpcurrency-exchange"]||[]).push([[0],{177:function(e,t,n){e.exports=n(342)},186:function(e,t,n){},246:function(e,t,n){},338:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"convert",(function(){return y})),n.d(r,"resolveConvert",(function(){return E})),n.d(r,"rejectConvert",(function(){return O}));var a={};n.r(a),n.d(a,"getResult",(function(){return j})),n.d(a,"isPending",(function(){return C})),n.d(a,"getErrorMessage",(function(){return x}));var c={};n.r(c),n.d(c,"changeBaseCurrency",(function(){return U})),n.d(c,"resolveChangeBaseCurrency",(function(){return D})),n.d(c,"rejectChangeBaseCurrency",(function(){return R}));var u={};n.r(u),n.d(u,"getCurrencies",(function(){return A})),n.d(u,"getBaseCurrency",(function(){return I})),n.d(u,"getRates",(function(){return N})),n.d(u,"isPending",(function(){return T})),n.d(u,"hasError",(function(){return z}));var o=n(0),i=n.n(o),s=n(4),l=n.n(s),f=n(63),p=n(50),m=n(27),v=n(64),d={amount:null,convertedAmount:null,from:null,to:null,pending:!1,errorMessage:null},g=n(97);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e,t){var n=t.payload;return b({},e,{amount:n.amount,convertedAmount:null,from:n.from,to:n.to,pending:!0,errorMessage:null})},E=function(e,t){return b({},e,{convertedAmount:t.payload,pending:!1})},O=function(e,t){return b({},e,{errorMessage:t.payload,pending:!1})},j=function(e){var t=e.amount,n=e.convertedAmount,r=e.from,a=e.to;return null===t||null===n||null===r||null===a?null:{amount:t,convertedAmount:n,from:r,to:a}},C=function(e){return e.pending},x=function(e){return e.errorMessage},w=Object(v.b)({name:"exchange",initialState:d,reducers:r}),k=w.actions,P=w.reducer,S={currencies:["RUB","USD","EUR"],baseCurrency:"",rates:[],pending:!1,error:!1};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(e,t){return M({},e,{baseCurrency:t.payload,rates:[],pending:!0,error:!1})},D=function(e,t){return M({},e,{rates:t.payload,pending:!1})},R=function(e){return M({},e,{error:!0,pending:!1})},A=function(e){return e.currencies},I=function(e){return e.baseCurrency},N=function(e){return e.rates},T=function(e){return e.pending},z=function(e){return e.error},J=Object(v.b)({name:"rates",initialState:S,reducers:c}),q=J.actions,H=J.reducer,K=Object(v.a)({reducer:{exchange:P,rates:H}}),F=function(e){return e.exchange},G=function(e){return e.rates},L=K,Q=n(343),V=n(347),W=n(350),X=(n(186),Q.a.Header),Y=Q.a.Content,Z=V.a.Title,$=function(e){var t=e.activeMenu,n=e.children;return i.a.createElement(Q.a,null,i.a.createElement(X,null,i.a.createElement(Z,{level:2},"Currency"),i.a.createElement(W.a,{theme:"dark",mode:"horizontal",selectedKeys:t?[t]:void 0},i.a.createElement(W.a.Item,{key:"/exchange"},i.a.createElement(f.b,{to:"/exchange"},"Exchange")),i.a.createElement(W.a.Item,{key:"/rates"},i.a.createElement(f.b,{to:"/rates"},"Rates")))),i.a.createElement(Y,null,n))},_=function(e){var t=Object(p.g)(),n=e.children;return i.a.createElement($,{activeMenu:t.pathname},n)},ee=n(23),te=n.n(ee),ne=n(38),re=function(){var e=Object(ne.a)(te.a.mark((function e(t,n,r){var a,c,u;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="?amount=".concat(t,"&from=").concat(n,"&to=").concat(r),e.next=3,fetch("".concat("https://frankfurter.app","/latest").concat(a));case 3:return c=e.sent,e.next=6,c.json();case 6:return u=e.sent,e.abrupt("return",u.rates[r.toUpperCase()]);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ae=function(){var e=Object(ne.a)(te.a.mark((function e(t,n){var r,a,c,u;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="?from=".concat(t,"&to=").concat(n),e.next=3,fetch("".concat("https://frankfurter.app","/latest").concat(r));case 3:return a=e.sent,e.next=6,a.json();case 6:return c=e.sent,u=c.rates,e.abrupt("return",n.map((function(e){return{currency:e,rate:1/u[e.toUpperCase()]}})));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=re,ue=n(174),oe=n(352),ie=n(10),se=n(346),le=n(348),fe=n(351),pe=(n(246),i.a.useState),me=i.a.useCallback,ve=function(e){var t=e.result,n=e.errorMessage,r=e.pending,a=e.onConvert,c=pe(!1),u=Object(ue.a)(c,2),o=u[0],s=u[1],l=o||!!n,f=me((function(e){var t=function(e){var t=e.match(/(\d+)\s+(\w+)\s+(?:in|to)\s+(\w+)/);return t?{amount:Number(t[1]),from:t[2],to:t[3]}:null}(e);if(t){s(!1);var n=t.amount,r=t.from,c=t.to;a&&a(n,r,c)}else s(!0)}),[a,s]);return i.a.createElement(oe.a,{icon:i.a.createElement(ie.a,{type:"transaction"}),title:"Exchange to another currency",subTitle:"Type the amount with current currency and which currency to convert",extra:i.a.createElement("div",{className:"exchange"},i.a.createElement(se.a,null,i.a.createElement(se.a.Item,{validateStatus:l?"error":"",help:n},i.a.createElement(le.a.Search,{size:"large",enterButton:i.a.createElement(ie.a,{type:"enter"}),placeholder:"100 usd in eur",loading:r,"aria-label":"Send",onSearch:f}))),t&&!r?i.a.createElement("div",{className:"exchange-result"},i.a.createElement(fe.a,{title:"".concat(t.amount," ").concat(t.from.toUpperCase()," to equal"),value:t.convertedAmount,precision:2,suffix:t.to.toUpperCase()})):null)})},de=a.isPending,ge=a.getResult,he=a.getErrorMessage,be=function(){var e=Object(m.b)(),t=Object(o.useCallback)((function(t,n,r){e(function(e,t,n){return function(){var r=Object(ne.a)(te.a.mark((function r(a){var c;return te.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(k.convert({amount:e,from:t,to:n})),r.prev=1,r.next=4,ce(e,t,n);case 4:c=r.sent,a(k.resolveConvert(c)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),a(k.rejectConvert("Something went wrong, try again later"));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}(t,n,r))}),[e]),n=Object(m.c)((function(e){return de(F(e))})),r=Object(m.c)((function(e){return ge(F(e))})),a=Object(m.c)((function(e){return he(F(e))}));return i.a.createElement(ve,{pending:n,result:r||void 0,errorMessage:a||void 0,onConvert:t})},ye=n(349),Ee=n(344),Oe=n(353),je=n(66),Ce=n(35),xe=n(345),we=(n(338),ye.a.Option),ke=function(e){var t=e.currencies,n=e.activeCurrency,r=e.rates,a=void 0===r?[]:r,c=e.pending,u=void 0!==c&&c,o=e.hasError,s=void 0!==o&&o,l=e.onChangeCurrency;return i.a.createElement(oe.a,{icon:i.a.createElement(ie.a,{type:"fund"}),title:i.a.createElement("span",{className:"rates-title"},"Currency Rates to",i.a.createElement(ye.a,{value:n,onChange:l},t.map((function(e){return i.a.createElement(we,{key:e,value:e},e)})))),extra:i.a.createElement("div",{className:"rates"},u&&i.a.createElement(Ee.a,null),s&&i.a.createElement(Oe.a,{message:"Something wrong, try again later",type:"error",showIcon:!0}),i.a.createElement("div",null,i.a.createElement(je.a,null,a.map((function(e){var t=e.currency,r=e.rate;return i.a.createElement(Ce.a,{span:12,key:t},i.a.createElement(xe.a,null,i.a.createElement(fe.a,{title:"1 ".concat(t.toUpperCase()," ="),value:r,precision:2,suffix:n.toUpperCase()})))})))))})},Pe=function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://ip-api.com","/json/?fields=currency"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.currency.toUpperCase());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(e){return function(){var t=Object(ne.a)(te.a.mark((function t(n,r){var a,c,o,i;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(q.changeBaseCurrency(e)),a=r(),c=u.getCurrencies(G(a)),o=c.filter((function(t){return t!==e})),t.prev=4,t.next=7,ae(e,o);case 7:i=t.sent,n(q.resolveChangeBaseCurrency(i)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),n(q.rejectChangeBaseCurrency());case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n){return t.apply(this,arguments)}}()},Be=u.getCurrencies,Me=u.getBaseCurrency,Ue=u.getRates,De=u.isPending,Re=u.hasError,Ae=function(){var e=Object(m.b)();Object(o.useEffect)((function(){e(function(){var e=Object(ne.a)(te.a.mark((function e(t,n){var r,a,c,o,i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=u.getBaseCurrency(G(r))){e.next=15;break}return c=u.getCurrencies(G(r)),o=c[0],e.prev=5,e.next=8,Pe();case 8:i=e.sent,a=c.includes(i)?i:o,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),a=o;case 15:t(Se(a));case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}())}),[e]);var t=Object(o.useCallback)((function(t){e(Se(t))}),[e]),n=Object(m.c)((function(e){return Be(G(e))})),r=Object(m.c)((function(e){return Me(G(e))})),a=Object(m.c)((function(e){return Ue(G(e))})),c=Object(m.c)((function(e){return De(G(e))})),s=Object(m.c)((function(e){return Re(G(e))}));return i.a.createElement(ke,{currencies:n,activeCurrency:r,rates:a,pending:c,hasError:s,onChangeCurrency:t})},Ie=(n(340),n(341),function(){return i.a.createElement(m.a,{store:L},i.a.createElement(f.a,null,i.a.createElement(_,null,i.a.createElement(p.d,null,i.a.createElement(p.b,{path:"/exchange"},i.a.createElement(be,null)),i.a.createElement(p.b,{path:"/rates"},i.a.createElement(Ae,null)),i.a.createElement(p.a,{to:"/exchange"})))))});l.a.render(i.a.createElement(Ie,null),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.5b075bb1.chunk.js.map